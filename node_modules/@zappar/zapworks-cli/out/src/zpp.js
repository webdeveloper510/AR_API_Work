"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const path = require("path");
const unusedFilename = require("unused-filename");
const chalk_1 = require("chalk");
const index_1 = require("../modules/zpp/src/zpputils/index");
async function crush(inputPath) {
    let outputPath = path.join(path.dirname(inputPath), `${path.basename(inputPath, path.extname(inputPath))}_cleaned${path.extname(inputPath)}`);
    outputPath = await unusedFilename(outputPath);
    const inputSymbol = await (0, index_1.symbolReaderForPath)(inputPath);
    const outputSymbol = await (0, index_1.symbolWriterForPath)(outputPath);
    await outputSymbol.copyFrom(inputSymbol);
    await outputSymbol.save();
    console.log('Cleaned ZPP saved at:', (0, chalk_1.greenBright)(outputPath));
}
exports.default = crush;
